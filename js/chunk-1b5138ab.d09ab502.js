(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b5138ab"],{"0ac1":function(e,t,s){"use strict";s.r(t);var n=s("7a23");const o={class:"container"},r={class:"container py-4"},l={class:"my-5 row justify-content-center"},c={class:"card align-middle mb-3"},a={class:"accordion",ref:"checkCollapse"},i={class:"accordion-item"},d=Object(n["createElementVNode"])("h2",{class:"accordion-header",id:"headingOne"},[Object(n["createElementVNode"])("button",{class:"accordion-button text-brown",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"},[Object(n["createElementVNode"])("p",{class:"fw-bold m-0 fs-5"},[Object(n["createElementVNode"])("i",{class:"bi bi-cart-plus-fill me-1"}),Object(n["createTextVNode"])(" 訂單明細 ")])])],-1),b={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},p={class:"d-flex mb-2 text-brown fw-bold"},h=["src"],m={class:"d-flex flex-column flex-grow-1"},u={class:"fw-bold m-2"},g={class:"d-flex flex-column mt-auto"},f={class:"text-muted text-end"},O={class:"d-flex justify-content-between text-brown fw-bold"},j={class:"d-flex flex-column my-3 pe-4"},_={class:"text-end text-brown fw-bold"},w={class:"card"},y=Object(n["createElementVNode"])("div",{class:"card-header px-sm-3 px-2"},[Object(n["createElementVNode"])("h3",{class:"card-title text-brown pt-2"},"訂單資訊")],-1),N={class:"table table-borderless my-3"},E=Object(n["createElementVNode"])("th",{scope:"row",width:"150",class:"px-sm-3 px-2"},"成立時間",-1),x=Object(n["createElementVNode"])("th",{scope:"row",class:"px-sm-3 px-2"},"收件人姓名",-1),V=Object(n["createElementVNode"])("th",{scope:"row",class:"px-sm-3 px-2"},"收件人手機",-1),k=Object(n["createElementVNode"])("th",{scope:"row",class:"px-sm-3 px-2"},"收件人地址",-1),C=Object(n["createElementVNode"])("th",{scope:"row",class:"px-sm-3 px-2"},"付款狀態",-1),v={key:0,class:"text-danger"},T={key:1,class:"text-success"},L={key:0,class:"row justify-content-around px-sm-3 pb-3"};function S(e,t,s,S,A,B){const $=Object(n["resolveComponent"])("VueLoading"),D=Object(n["resolveComponent"])("UserProgress"),F=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])($,{active:A.isLoading},null,8,["active"]),Object(n["createElementVNode"])("section",o,[Object(n["createVNode"])(D,{"checkout-type":A.progressType},null,8,["checkout-type"])]),Object(n["createElementVNode"])("main",r,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("form",{class:"col-md-7",onSubmit:t[1]||(t[1]=Object(n["withModifiers"])((...e)=>B.payOrder&&B.payOrder(...e),["prevent"]))},[Object(n["createElementVNode"])("section",c,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",i,[d,Object(n["createElementVNode"])("div",b,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(A.order.products,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"accordion-body border-bottom",key:e.id},[Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("img",{src:e.product.imageUrl,alt:"購物車圖片",class:"me-2 cart-img"},null,8,h),Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("h5",u,"品名 : "+Object(n["toDisplayString"])(e.product.title),1),Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("del",f," NT$ "+Object(n["toDisplayString"])(e.product.origin_price),1)])])]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("span",null,"包數："+Object(n["toDisplayString"])(e.qty)+"包",1),Object(n["createElementVNode"])("span",null,"單包數量："+Object(n["toDisplayString"])(e.product.unit),1),Object(n["createElementVNode"])("span",null,"單價 : NT$ "+Object(n["toDisplayString"])(e.final_total),1)])]))),128)),Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("h5",_,"總計 : NT$ "+Object(n["toDisplayString"])(A.order.total),1)])])])],512)]),Object(n["createElementVNode"])("section",w,[y,Object(n["createElementVNode"])("table",N,[Object(n["createElementVNode"])("tbody",null,[Object(n["createElementVNode"])("tr",null,[E,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.$filters.date(A.order.create_at)),1)]),Object(n["createElementVNode"])("tr",null,[x,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(A.order.user.name),1)]),Object(n["createElementVNode"])("tr",null,[V,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(A.order.user.tel),1)]),Object(n["createElementVNode"])("tr",null,[k,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(A.order.user.address),1)]),Object(n["createElementVNode"])("tr",null,[C,Object(n["createElementVNode"])("td",null,[A.order.is_paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",T,"付款完成")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",v,"尚未付款"))])])])]),!1===A.order.is_paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,[Object(n["createVNode"])(F,{to:"/products",class:"col-5 py-2 btn btn-outline-secondary btn-block"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" 重新購物 ")]),_:1}),Object(n["createElementVNode"])("button",{type:"button",class:"col-5 btn btn-success btn-block mt-0 ml-3",onClick:t[0]||(t[0]=(...e)=>B.payOrder&&B.payOrder(...e))},"確認付款去")])):Object(n["createCommentVNode"])("",!0)])],32)])])],64)}var A=s("cfb9"),B=s("810f"),$=s.n(B),D=s("3b9c"),F={components:{UserProgress:D["a"]},data(){return{order:{user:{}},orderId:"",isLoading:!1,styleObject:{width:"0%"},progressType:"check",collapse:null}},methods:{getOrder(){const e="https://vue3-course-api.hexschool.io/api/chifinal-api/order/"+this.orderId;this.isLoading=!0,this.$http.get(e).then(e=>{e.data.success&&(this.order=e.data.order,this.isLoading=!1)})},payOrder(){const e="https://vue3-course-api.hexschool.io/api/chifinal-api/pay/"+this.orderId;this.$http.post(e).then(e=>{this.$swal.fire({position:"center",icon:"success",title:"您已成功付款 ! 已安排出貨 !",showConfirmButton:!1,timer:2e3}),e.data.success&&(this.getOrder(),A["a"].emit("getCartLength"))}).catch(()=>{this.$swal.fire({icon:"error",title:"付款失敗，請確認是否為商家配合付款方式 !",showConfirmButton:!1,timer:1500})})}},mounted(){this.collapse=new $.a(this.$refs.checkCollapse)},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},I=s("6b0d"),z=s.n(I);const P=z()(F,[["render",S]]);t["default"]=P},"3b9c":function(e,t,s){"use strict";var n=s("7a23");const o={class:"position-relative m-5"},r={class:"progress",style:{height:"3px"}},l=Object(n["createElementVNode"])("span",{class:"text-dark fw-bold position-absolute top-100 start-50 translate-middle-x text-nowrap text-brown"},"購物車 ",-1),c=Object(n["createElementVNode"])("span",{class:"text-dark fw-bold position-absolute top-100 start-50 translate-middle-x text-nowrap text-brown"},"填寫資料 ",-1),a=Object(n["createElementVNode"])("span",{class:"text-dark fw-bold position-absolute top-100 start-50 translate-middle-x text-nowrap text-brown"},"訂單確認 ",-1);function i(e,t,s,i,d,b){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",{class:"progress-bar bg-warning",role:"progressbar",style:Object(n["normalizeStyle"])(d.styleObject),"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"},null,4)]),Object(n["createElementVNode"])("button",{type:"button",ref:"cart",class:Object(n["normalizeClass"])([d.successClass,"position-absolute top-0 start-0 pe-none translate-middle btn btn-sm text-white rounded-pill progress-w"])},[Object(n["createTextVNode"])("1 "),l],2),Object(n["createElementVNode"])("button",{type:"button",ref:"order",class:Object(n["normalizeClass"])([d.errorClass,"position-absolute top-0 start-50 pe-none translate-middle btn btn-sm rounded-pill text-white progress-w"])},[Object(n["createTextVNode"])("2 "),c],2),Object(n["createElementVNode"])("button",{type:"button",ref:"check",class:Object(n["normalizeClass"])([d.errorClass,"position-absolute top-0 start-100 pe-none translate-middle btn btn-sm text-white btn-secondary rounded-pill progress-w"])},[Object(n["createTextVNode"])("3 "),a],2)])}var d={props:["checkoutType"],data(){return{styleObject:{width:"0%"},errorClass:"btn-secondary",successClass:"btn-warning"}},methods:{checkProgress(){"order"===this.checkoutType?(this.styleObject.width="50%",this.$refs.order.classList.add(this.successClass)):"check"===this.checkoutType&&(this.styleObject.width="100%",this.$refs.order.classList.add(this.successClass),this.$refs.check.classList.add(this.successClass))}},mounted(){this.checkProgress()}},b=s("6b0d"),p=s.n(b);const h=p()(d,[["render",i]]);t["a"]=h},"810f":function(e,t,s){
/*!
  * Bootstrap collapse.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(t,n){e.exports=n(s("aa53"),s("6a95"),s("848f"),s("302d"))})(0,(function(e,t,s,n){"use strict";const o=e=>e&&"object"===typeof e&&"default"in e?e:{default:e},r=o(t),l=o(s),c=o(n),a="collapse",i="bs.collapse",d="."+i,b=".data-api",p="show"+d,h="shown"+d,m="hide"+d,u="hidden"+d,g=`click${d}${b}`,f="show",O="collapse",j="collapsing",_="collapsed",w=`:scope .${O} .${O}`,y="collapse-horizontal",N="width",E="height",x=".collapse.show, .collapse.collapsing",V='[data-bs-toggle="collapse"]',k={parent:null,toggle:!0},C={parent:"(null|element)",toggle:"boolean"};class v extends c.default{constructor(t,s){super(t,s),this._isTransitioning=!1,this._triggerArray=[];const n=l.default.find(V);for(const o of n){const t=e.getSelectorFromElement(o),s=l.default.find(t).filter(e=>e===this._element);null!==t&&s.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return k}static get DefaultType(){return C}static get NAME(){return a}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(x).filter(e=>e!==this._element).map(e=>v.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;const t=r.default.trigger(this._element,p);if(t.defaultPrevented)return;for(const r of e)r.hide();const s=this._getDimension();this._element.classList.remove(O),this._element.classList.add(j),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(j),this._element.classList.add(O,f),this._element.style[s]="",r.default.trigger(this._element,h)},o=s[0].toUpperCase()+s.slice(1),l="scroll"+o;this._queueCallback(n,this._element,!0),this._element.style[s]=this._element[l]+"px"}hide(){if(this._isTransitioning||!this._isShown())return;const t=r.default.trigger(this._element,m);if(t.defaultPrevented)return;const s=this._getDimension();this._element.style[s]=this._element.getBoundingClientRect()[s]+"px",e.reflow(this._element),this._element.classList.add(j),this._element.classList.remove(O,f);for(const o of this._triggerArray){const t=e.getElementFromSelector(o);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(j),this._element.classList.add(O),r.default.trigger(this._element,u)};this._element.style[s]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(f)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=e.getElement(t.parent),t}_getDimension(){return this._element.classList.contains(y)?N:E}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(V);for(const s of t){const t=e.getElementFromSelector(s);t&&this._addAriaAndCollapsedClass([s],this._isShown(t))}}_getFirstLevelChildren(e){const t=l.default.find(w,this._config.parent);return l.default.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const s of e)s.classList.toggle(_,!t),s.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"===typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const s=v.getOrCreateInstance(this,t);if("string"===typeof e){if("undefined"===typeof s[e])throw new TypeError(`No method named "${e}"`);s[e]()}}))}}return r.default.on(document,g,V,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const s=e.getSelectorFromElement(this),n=l.default.find(s);for(const e of n)v.getOrCreateInstance(e,{toggle:!1}).toggle()})),e.defineJQueryPlugin(v),v}))}}]);
//# sourceMappingURL=chunk-1b5138ab.d09ab502.js.map