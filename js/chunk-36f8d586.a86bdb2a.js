(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36f8d586"],{"3b9c":function(e,t,c){"use strict";var o=c("7a23");const s={class:"position-relative m-5"},a={class:"progress",style:{height:"3px"}},l=Object(o["createElementVNode"])("span",{class:"text-dark fw-bold position-absolute top-100 start-50 translate-middle-x text-nowrap text-brown"},"購物車 ",-1),n=Object(o["createElementVNode"])("span",{class:"text-dark fw-bold position-absolute top-100 start-50 translate-middle-x text-nowrap text-brown"},"填寫資料 ",-1),r=Object(o["createElementVNode"])("span",{class:"text-dark fw-bold position-absolute top-100 start-50 translate-middle-x text-nowrap text-brown"},"訂單確認 ",-1);function i(e,t,c,i,d,b){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",{class:"progress-bar bg-warning",role:"progressbar",style:Object(o["normalizeStyle"])(d.styleObject),"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"},null,4)]),Object(o["createElementVNode"])("button",{type:"button",ref:"cart",class:Object(o["normalizeClass"])([d.successClass,"position-absolute top-0 start-0 pe-none translate-middle btn btn-sm text-white rounded-pill progress-w"])},[Object(o["createTextVNode"])("1 "),l],2),Object(o["createElementVNode"])("button",{type:"button",ref:"order",class:Object(o["normalizeClass"])([d.errorClass,"position-absolute top-0 start-50 pe-none translate-middle btn btn-sm rounded-pill text-white progress-w"])},[Object(o["createTextVNode"])("2 "),n],2),Object(o["createElementVNode"])("button",{type:"button",ref:"check",class:Object(o["normalizeClass"])([d.errorClass,"position-absolute top-0 start-100 pe-none translate-middle btn btn-sm text-white btn-secondary rounded-pill progress-w"])},[Object(o["createTextVNode"])("3 "),r],2)])}var d={props:["checkoutType"],data(){return{styleObject:{width:"0%"},errorClass:"btn-secondary",successClass:"btn-warning"}},methods:{checkProgress(){"order"===this.checkoutType?(this.styleObject.width="50%",this.$refs.order.classList.add(this.successClass)):"check"===this.checkoutType&&(this.styleObject.width="100%",this.$refs.order.classList.add(this.successClass),this.$refs.check.classList.add(this.successClass))}},mounted(){this.checkProgress()}},b=c("6b0d"),u=c.n(b);const m=u()(d,[["render",i]]);t["a"]=m},7182:function(e,t,c){e.exports=c.p+"img/picwish.dc7baad7.png"},"76db":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),s=c("7182"),a=c.n(s);const l={class:"container pb-5"},n={class:"container py-5 row"},r={class:"col-lg-8 col-md-7 mb-3"},i={class:"card mb-5"},d={class:"card-header px-sm-3 px-2"},b={class:"card-title fw-bold text-brown pt-2"},u=Object(o["createElementVNode"])("i",{class:"bi bi-cart-plus-fill fs-2"},null,-1),m={key:0,class:"card-body px-sm-3 px-2"},p={class:"list-group list-group-flush"},h=Object(o["createElementVNode"])("li",{class:"list-group-item py-3 d-none d-md-block"},[Object(o["createElementVNode"])("tr",{class:"d-flex justify-content-between text-brown"},[Object(o["createElementVNode"])("th",{class:"ms-1"},"品名"),Object(o["createElementVNode"])("th",null,"照片"),Object(o["createElementVNode"])("th",null,"數量"),Object(o["createElementVNode"])("th",null,"單價"),Object(o["createElementVNode"])("th")])],-1),j={key:0,class:"d-flex justify-content-between row g-0"},O={class:"col-6 col-md-3 mb-3 d-flex align-items-center"},g={key:0,class:"text-success"},N={class:"col-6 mb-3 text-end d-block d-md-none"},V=["disabled","onClick"],f=Object(o["createElementVNode"])("i",{class:"bi bi-x"},null,-1),E=[f],x={class:"col-12 col-md-3"},w=["src"],y={class:"col-5 col-md-2 mt-3"},k={class:"input-group input-group-sm"},C=["disabled","onChange","onUpdate:modelValue"],v={class:"input-group-text"},B={class:"text-md-center text-end col col-md-3 mt-3 fs-5"},$={key:0,class:"text-success"},L={class:"text-center col col-md-1 mt-3"},T=["disabled","onClick"],_=Object(o["createElementVNode"])("i",{class:"bi bi-x"},null,-1),I=[_],D={key:1,class:"mx-auto text-center p-5 position-relative mt-5"},P=Object(o["createElementVNode"])("i",{class:"bi text-success bi-caret-down-fill position-absolute top-100 start-50 translate-middle mt-1 fs-3"},null,-1),S=Object(o["createElementVNode"])("img",{class:"img-fluid mt-2",src:a.a,alt:"黑白毛色狗"},null,-1),z=Object(o["createElementVNode"])("h4",{class:"text-brown fw-bold bg-warning p-2 rounded mt-3"},"您還沒有加入任何商品哦 !",-1),U={class:"col-lg-4 col-md-5"},q={class:"card text-brown"},F=Object(o["createElementVNode"])("div",{class:"card-header fw-bold fs-5 py-3"}," 訂單資訊 ",-1),J={class:"card-body"},M={key:0,class:"d-flex justify-content-between mb-2"},A=Object(o["createElementVNode"])("span",null,"原價：",-1),G={key:1,class:"d-flex justify-content-between mb-2 text-success"},H=Object(o["createElementVNode"])("span",null,"折扣價：",-1),K=Object(o["createElementVNode"])("div",{class:"d-flex justify-content-between mb-2"},[Object(o["createElementVNode"])("span",null,"運費："),Object(o["createElementVNode"])("span",null,"NT$ 60")],-1),Q=Object(o["createElementVNode"])("hr",null,null,-1),R={key:2,class:"d-flex justify-content-between mb-3 fw-bold"},W=Object(o["createElementVNode"])("span",null,"合計：",-1),X={key:3,class:"d-flex justify-content-between mb-3 text-success fw-bold"},Y=Object(o["createElementVNode"])("span",null,"折扣價：",-1),Z={class:"input-group mb-3 input-group-sm"},ee={class:"input-group-append input-group-sm"},te=Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])("輸入"),Object(o["createElementVNode"])("span",{class:"bg-light fw-bold"}," costdo85 "),Object(o["createTextVNode"])(" 即可享有 85 折優惠")],-1),ce={class:"d-flex justify-content-between mt-4"};function oe(e,t,c,s,a,f){const _=Object(o["resolveComponent"])("VueLoading"),oe=Object(o["resolveComponent"])("UserProgress"),se=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(_,{active:a.isLoading},null,8,["active"]),Object(o["createElementVNode"])("main",l,[Object(o["createVNode"])(oe,{"checkout-type":a.progressType},null,8,["checkout-type"]),Object(o["createElementVNode"])("section",n,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("section",i,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("h3",b,[Object(o["createTextVNode"])("購物車 ( "+Object(o["toDisplayString"])(a.cartLength)+" 件 ) ",1),u])]),a.cartLength?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[Object(o["createElementVNode"])("ul",p,[h,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.cart.carts,t=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"list-group-item",key:t.id},[a.cart.carts?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",j,[Object(o["createElementVNode"])("td",O,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g," 已套用優惠券 ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("td",N,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:a.status.loadingItem===t.id,onClick:e=>f.removeCartItem(t.id)},E,8,V)]),Object(o["createElementVNode"])("td",x,[Object(o["createElementVNode"])("img",{src:t.product.imageUrl,alt:"購物車圖片",class:"cart-img"},null,8,w)]),Object(o["createElementVNode"])("td",y,[Object(o["createElementVNode"])("div",k,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"number",class:"form-control","aria-label":"商品數量",min:"1",disabled:t.id===a.status.loadingItem,onChange:e=>f.updateCart(t),"onUpdate:modelValue":e=>t.qty=e},null,40,C),[[o["vModelText"],t.qty,void 0,{number:!0}]]),Object(o["createElementVNode"])("div",v,"/ "+Object(o["toDisplayString"])(t.product.unit),1)])]),Object(o["createElementVNode"])("td",B,[a.cart.final_total!==a.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("small",$,"折扣價:")):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" $ "+Object(o["toDisplayString"])(e.$filters.currency(t.final_total)),1)]),Object(o["createElementVNode"])("td",L,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-2 d-none d-md-inline",disabled:a.status.loadingItem===t.id,onClick:e=>f.removeCartItem(t.id)},I,8,T)])])):Object(o["createCommentVNode"])("",!0)]))),128))])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-lg btn-success position-relative position-absolute top-0 start-50 f-kalam btn-h",onClick:t[0]||(t[0]=(...e)=>f.goProducts&&f.goProducts(...e))},[Object(o["createTextVNode"])(" 返回商品頁 "),P]),S,z]))])]),Object(o["createElementVNode"])("div",U,[Object(o["createElementVNode"])("div",q,[F,Object(o["createElementVNode"])("div",J,[a.cart.final_total===a.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",M,[A,Object(o["createElementVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(e.$filters.currency(a.cart.total)),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,[H,Object(o["createElementVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(e.$filters.currency(a.cart.final_total)),1)])),K,Q,a.cart.final_total===a.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",R,[W,Object(o["createElementVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(e.$filters.currency(a.cart.total+60)),1)])):a.cart.final_total!==a.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",X,[Y,Object(o["createElementVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(e.$filters.currency(a.cart.final_total+60)),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",Z,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>a.coupon_code=e),"aria-label":"請輸入優惠碼",placeholder:"請輸入優惠碼"},null,512),[[o["vModelText"],a.coupon_code]]),Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])(["btn btn-outline-dark",{disabled:!a.cartLength}]),type:"button",onClick:t[2]||(t[2]=(...e)=>f.addCouponCode&&f.addCouponCode(...e))}," 套用優惠碼 ",2)])]),te,Object(o["createElementVNode"])("div",ce,[Object(o["createVNode"])(se,{to:"/products",class:"btn btn-outline-secondary btn-block mr-2"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" 繼續購物 ")]),_:1}),Object(o["createVNode"])(se,{to:"/user/order",class:Object(o["normalizeClass"])(["btn btn-success btn-block mt-0",{disabled:!a.cartLength}])},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" 前往結帳 ")]),_:1},8,["class"])])])])])])])],64)}c("14d9");var se=c("cfb9"),ae=c("3b9c"),le={components:{UserProgress:ae["a"]},data(){return{products:[],product:{},status:{loadingItem:""},cart:{},cartLength:"0",coupon_code:"",isLoading:!1,progressType:"cart"}},methods:{getProducts(){const e="https://vue3-course-api.hexschool.io/api/chifinal-api/products/all";this.isLoading=!0,this.$http.get(e).then(e=>{this.products=e.data.products,this.isLoading=!1}).catch(()=>{this.$swal.fire({icon:"error",title:"獲取商品失敗，請確認是否保持連線 !",showConfirmButton:!1,timer:1500})})},getProduct(e){this.$router.push("/user/product/"+e)},addCart(e){const t="https://vue3-course-api.hexschool.io/api/chifinal-api/cart";this.status.loadingItem=e;const c={product_id:e,qty:1};this.$http.post(t,{data:c}).then(()=>{this.status.loadingItem="",this.getCart()}).catch(()=>{this.$swal.fire({icon:"error",title:"加入商品失敗，請確認是否有保持連線 !",showConfirmButton:!1,timer:1500})})},getCart(){const e="https://vue3-course-api.hexschool.io/api/chifinal-api/cart";this.isLoading=!0,this.$http.get(e).then(e=>{this.cart=e.data.data,this.cartLength=e.data.data.carts.length,this.isLoading=!1}).catch(()=>{this.$swal.fire({icon:"error",title:"獲取失敗，請確認是否保持連線 !",showConfirmButton:!1,timer:1500})})},updateCart(e){const t="https://vue3-course-api.hexschool.io/api/chifinal-api/cart/"+e.id;this.isLoading=!0,this.status.loadingItem=e.id;const c={product_id:e.product_id,qty:e.qty};this.$http.put(t,{data:c}).then(()=>{this.status.loadingItem="",this.getCart()}).catch(()=>{this.$swal.fire({icon:"error",title:"新增失敗，請確認是否有保持連線 !",showConfirmButton:!1,timer:1500})})},removeCartItem(e){this.status.loadingItem=e;const t="https://vue3-course-api.hexschool.io/api/chifinal-api/cart/"+e;this.isLoading=!0,this.$http.delete(t).then(()=>{this.status.loadingItem="",this.getCart(),se["a"].emit("getCartLength"),this.isLoading=!1}).catch(()=>{this.$swal.fire({icon:"error",title:"移除失敗，請確認是否有保持連線 !",showConfirmButton:!1,timer:1500})})},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/chifinal-api/coupon",t={code:this.coupon_code.trim()};this.isLoading=!0,this.$http.post(e,{data:t}).then(e=>{this.isLoading=!1,e.data.success?this.getCart():this.$swal.fire({icon:"error",title:"優惠碼錯誤",text:"請確認是否輸入正確優惠碼 !",showConfirmButton:!1,timer:2e3})}).catch(()=>{this.$swal.fire({icon:"error",title:"加入優惠卷失敗，請確認是否有保持連線 !",showConfirmButton:!1,timer:1500})})},goProducts(){this.$router.push("/products")}},created(){this.getProducts(),this.getCart()}},ne=c("6b0d"),re=c.n(ne);const ie=re()(le,[["render",oe]]);t["default"]=ie}}]);
//# sourceMappingURL=chunk-36f8d586.a86bdb2a.js.map