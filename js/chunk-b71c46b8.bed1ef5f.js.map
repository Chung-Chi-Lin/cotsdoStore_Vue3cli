{"version":3,"sources":["webpack:///./src/views/BackgroundCoupons.vue","webpack:///./src/components/CouponModal.vue","webpack:///./src/components/CouponModal.vue?27a9","webpack:///./src/views/BackgroundCoupons.vue?5d76","webpack:///./src/components/DelModal.vue","webpack:///./src/components/DelModal.vue?813f"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_VueLoading","active","$data","_hoisted_1","onClick","$options","_hoisted_2","_hoisted_3","_Fragment","item","key","title","percent","_ctx","date","due_date","is_enabled","_hoisted_4","_hoisted_5","_hoisted_6","_component_couponModal","coupon","ref","onUpdateCoupon","_component_DelModal","onDelItem","id","tabindex","role","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","for","_hoisted_7","placeholder","_hoisted_8","_hoisted_9","code","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","true-value","false-value","_hoisted_17","_hoisted_18","name","props","data","tempCoupon","emits","watch","this","console","log","dateAndTime","Date","toISOString","split","Math","floor","mixins","modalMixin","__exports__","components","CouponModal","DelModal","config","Object","coupons","isLoading","isNew","methods","openCouponModal","getTime","$refs","couponModal","showModal","openDelCouponModal","delComponent","delModal","getCoupons","url","$http","get","tempProduct","then","response","updateCoupon","post","$httpMessageState","hideModal","put","delCoupon","delete","created","render","$props","modal"],"mappings":"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","file":"js/chunk-b71c46b8.bed1ef5f.js","sourcesContent":["<template>\n  <div>\n    <VueLoading :active=\"isLoading\" />\n    <div class=\"text-end mt-4\">\n      <button class=\"btn btn-brown\" @click=\"openCouponModal(true)\">\n        建立新的優惠券\n      </button>\n    </div>\n    <table class=\"table mt-4\">\n      <thead>\n      <tr>\n        <th>名稱</th>\n        <th>折扣百分比</th>\n        <th>到期日</th>\n        <th>是否啟用</th>\n        <th>編輯</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr v-for=\"(item, key) in coupons\" :key=\"key\">\n        <td>{{ item.title }}</td>\n        <td>{{ item.percent }}%</td>\n        <td>{{ $filters.date(item.due_date) }}</td>\n        <td>\n          <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\n          <span v-else class=\"text-muted\">未起用</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary btn-sm\"\n                    @click=\"openCouponModal(false, item)\"\n            >編輯</button>\n            <button class=\"btn btn-outline-danger btn-sm\"\n                    @click=\"openDelCouponModal(item)\"\n            >刪除</button>\n          </div>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n    <couponModal :coupon=\"tempCoupon\" ref=\"couponModal\"\n    @update-coupon=\"updateCoupon\"/>\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\"/>\n  </div>\n</template>\n\n<script>\nimport DelModal from '@/components/DelModal.vue';\nimport CouponModal from '@/components/CouponModal.vue';\n\nexport default {\n  components: { CouponModal, DelModal },\n  props: {\n    config: Object,\n  },\n  data() {\n    return {\n      coupons: {},\n      tempCoupon: {\n        title: '',\n        is_enabled: 0,\n        percent: 100,\n        code: '',\n      },\n      isLoading: false,\n      isNew: false,\n    };\n  },\n  methods: {\n    openCouponModal(isNew, item) {\n      this.isNew = isNew;\n      if (this.isNew) {\n        this.tempCoupon = {\n          due_date: new Date().getTime() / 1000,\n        };\n      } else {\n        this.tempCoupon = { ...item };\n      }\n      this.$refs.couponModal.showModal();\n    },\n    openDelCouponModal(item) {\n      this.tempCoupon = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    getCoupons() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons`;\n      this.$http.get(url, this.tempProduct).then((response) => {\n        this.coupons = response.data.coupons;\n        this.isLoading = false;\n        console.log(response);\n      });\n    },\n    updateCoupon(tempCoupon) {\n      if (this.isNew) {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\n        this.$http.post(url, { data: tempCoupon }).then((response) => {\n          console.log(response, tempCoupon);\n          this.$httpMessageState(response, '新增優惠券');\n          this.getCoupons();\n          this.$refs.couponModal.hideModal();\n        });\n      } else {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\n        this.$http.put(url, { data: this.tempCoupon }).then((response) => {\n          console.log(response);\n          this.$httpMessageState(response, '新增優惠券');\n          this.getCoupons();\n          this.$refs.couponModal.hideModal();\n        });\n      }\n    },\n    delCoupon() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        console.log(response, this.tempCoupon);\n        this.$httpMessageState(response, '刪除優惠券');\n        const delComponent = this.$refs.delModal;\n        delComponent.hideModal();\n        this.getCoupons();\n      });\n    },\n  },\n  created() {\n    this.getCoupons();\n  },\n};\n</script>\n","<template>\n  <div class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">優惠券</h5>\n          <button type=\"button\" class=\"btn-close\"\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label for=\"title\">標題\n              <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"tempCoupon.title\"\n              placeholder=\"請輸入標題\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"coupon_code\">優惠碼\n              <input type=\"text\" class=\"form-control\" id=\"coupon_code\" v-model=\"tempCoupon.code\"\n              placeholder=\"請輸入優惠碼\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"due_date\">到期日\n              <input type=\"date\" class=\"form-control\" id=\"due_date\"\n              v-model=\"due_date\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"price\">折扣百分比\n            <input type=\"number\" class=\"form-control\" id=\"price\"\n            v-model.number=\"tempCoupon.percent\" placeholder=\"請輸入折扣百分比\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check\">\n            <label class=\"form-check-label\" for=\"is_enabled\">是否啟用\n              <input class=\"form-check-input\" type=\"checkbox\"\n              :true-value=\"1\"\n              :false-value=\"0\"\n              v-model=\"tempCoupon.is_enabled\" id=\"is_enabled\">\n            </label>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-success\"\n                  @click=\"$emit('update-coupon', tempCoupon)\">更新優惠券\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  name: 'couponModal',\n  props: {\n    coupon: {},\n  },\n  data() {\n    return {\n      tempCoupon: {},\n      due_date: '',\n    };\n  },\n  emits: ['update-coupon'],\n  watch: {\n    coupon() {\n      this.tempCoupon = this.coupon;\n      // 將時間格式改為 YYYY-MM-DD\n      console.log(this.tempCoupon.due_date);\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\n        .toISOString().split('T');\n      [this.due_date] = dateAndTime;\n    },\n    due_date() {\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./CouponModal.vue?vue&type=template&id=7b42d609\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\前端\\\\Microsoft VS Code\\\\allPractice\\\\Vue3\\\\vueCostdoWorks\\\\costdo-works\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./BackgroundCoupons.vue?vue&type=template&id=503f1b98\"\nimport script from \"./BackgroundCoupons.vue?vue&type=script&lang=js\"\nexport * from \"./BackgroundCoupons.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\前端\\\\Microsoft VS Code\\\\allPractice\\\\Vue3\\\\vueCostdoWorks\\\\costdo-works\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"modal fade\" id=\"delModal\" tabindex=\"-1\" role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-danger text-white\">\n          <h5 class=\"modal-title\">\n            <span>刪除 {{ item.title }}</span>\n          </h5>\n          <button type=\"button\" class=\"btn-close\"\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          是否刪除 <strong class=\"text-danger\">{{ item.title }}</strong> (刪除後將無法恢復)。\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\"\n                  data-bs-dismiss=\"modal\">取消\n          </button>\n          <button type=\"button\" class=\"btn btn-danger\"\n                  @click=\"$emit('del-item')\">確認刪除\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    item: {},\n  },\n  data() {\n    return {\n      modal: {},\n    };\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./DelModal.vue?vue&type=template&id=35a88594\"\nimport script from \"./DelModal.vue?vue&type=script&lang=js\"\nexport * from \"./DelModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\前端\\\\Microsoft VS Code\\\\allPractice\\\\Vue3\\\\vueCostdoWorks\\\\costdo-works\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}